"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[500],{7698:function(e,t,n){n.d(t,{C:function(){return r},I:function(){return a},P:function(){return s},V:function(){return i},a:function(){return d},b:function(){return u},c:function(){return c}});var r,o,i,s,a,c,u,h=n(8148),l=n(2570),p=n(7933),d=(0,h.c)({applicationId:p.A,locale:new l.L,w:window,environment:p.e,loginStatus:!1,userId:void 0});(o=r||(r={})).EventAction="eventAction",o.ApplicationId="applicationId",o.Language="language",o.Country="country",o.Timestamp="timestamp",o.Environment="environment",o.Server="server",function(e){e.LoginStatus="loginStatus",e.DeviceBrowserHeight="deviceBrowserHeight",e.DeviceBrowserWidth="deviceBrowserWidth",e.DeviceBrowserBreakpoint="deviceBrowserBreakpoint",e.DeviceBrowserOrientation="deviceBrowserOrientation",e.DeviceType="deviceType"}(i||(i={})),function(e){e.PageId="pageId",e.PageName="pageName"}(s||(s={})),function(e){e.UserId="userId"}(a||(a={})),function(e){e.ModelRangeCode="modelRangeCode",e.ModelRangeName="modelRangeName",e.ModelSeriesCode="modelSeriesCode",e.ModelSeriesName="modelSeriesName",e.ModelName="modelName",e.Bodytype="bodytype"}(c||(c={})),function(e){e.ClickElementType="clickElementType",e.ClickElementId="clickElementId",e.ClickElementName="clickElementName",e.TargetUrl="targetUrl"}(u||(u={}))},8726:function(e,t,n){n.d(t,{L:function(){return c}});var r,o,i=n(4481),s=n(7933),a=n(7698);(o=r||(r={})).Portrait="p",o.Landscape="l";var c=function(){function e(e){this.initContext(),this.initVisitor(),this.initPageExperience(),this.initIds(),this.context.applicationId=e.applicationId,this.context.country=e.locale.country,this.context.language=e.locale.language,this.context.timestamp=(new Date).toISOString(),this.context.environment=this.getEnvironmentAbreviation(e.environment),this.populateVisitor(e.w,e.loginStatus),this.populatePageExperience(window),this.populateIds(e.userId)}return e.prototype.event=function(){return{context:this.context,visitor:this.visitor,pageExperience:this.pageExperience,ids:this.ids}},e.prototype.initContext=function(){var e;this.context=((e={})[a.C.ApplicationId]=void 0,e[a.C.Language]=void 0,e[a.C.Country]=void 0,e[a.C.EventAction]=void 0,e[a.C.Timestamp]=void 0,e[a.C.Environment]=void 0,e[a.C.Server]=void 0,e)},e.prototype.initVisitor=function(){var e;this.visitor=((e={})[a.V.LoginStatus]=void 0,e[a.V.DeviceBrowserWidth]=void 0,e[a.V.DeviceBrowserHeight]=void 0,e[a.V.DeviceBrowserBreakpoint]=void 0,e[a.V.DeviceBrowserOrientation]=void 0,e[a.V.DeviceType]=void 0,e)},e.prototype.initPageExperience=function(){var e;this.pageExperience=((e={})[a.P.PageId]=void 0,e[a.P.PageName]=void 0,e)},e.prototype.initIds=function(){var e;this.ids=((e={})[a.I.UserId]=void 0,e)},e.prototype.populateVisitor=function(t,n){void 0===n&&(n=!1),this.visitor.loginStatus=n,this.visitor.deviceBrowserHeight=t.innerHeight.toString(),this.visitor.deviceBrowserWidth=t.innerWidth.toString(),this.visitor.deviceBrowserBreakpoint=this.getLowerBreakpointForWidth(t.innerWidth).toString(),this.visitor.deviceBrowserOrientation=e.getDeviceOrientation(t)},e.prototype.populatePageExperience=function(e){this.pageExperience.pageId=e.location.protocol+"//"+e.location.host+e.location.pathname,this.pageExperience.pageName=e.document.title.length>0?e.document.title:void 0},e.prototype.populateIds=function(e){this.ids.userId=e},e.prototype.getLowerBreakpointForWidth=function(e){return Object.values(i.b).filter((function(t){return t<=e})).reverse().shift()},e.prototype.getEnvironmentAbreviation=function(e){return e===s.o.PRODUCTION?"P":e===s.o.PREVIEW?"PP":"K"},e.getDeviceOrientation=function(e){var t;return e.matchMedia("(orientation: landscape)").matches?t=r.Landscape:e.matchMedia("(orientation: portrait)").matches&&(t=r.Portrait),t},e}()},8008:function(e,t,n){n.d(t,{d:function(){return c},e:function(){return u},i:function(){return a}});var r=n(7698),o=n(7933),i=n(8778);function s(e,t,n){var s=r.a.state.environment,a=JSON.stringify({level:e,env:s,pageUrl:i.w.location.origin,message:{id:t,data:n}});s===o.o.LOCAL?console[e](a):s===o.o.PRODUCTION&&"debug"!==e&&fetch("https://logs.nav.porsche.com",{method:"POST",body:a,mode:"no-cors"})}var a=s.bind(null,"info"),c=s.bind(null,"debug"),u=s.bind(null,"error")},4500:function(e,t,n){n.r(t),n.d(t,{phn_header:function(){return ae}});var r,o=n(5020),i=n(4481),s=n(2570),a=n(7933),c=n(8008),u=n(8726),h=n(2025),l=n(7698),p=n(5854),d=n(6629),f=n(8778),v=n(2790),g=(n(8148),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),m=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?n(e.value):o(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())}))},y=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},_={test:{CONTENT_URL:"http://content/url",ASSETS_URL:"http://assets/url",PROFILE_API_URL:"http://profile-api/url",FOOTER_ASSETS_URL:"http://footer/assets",COUNTRY_SELECTOR_URL:"http://select/countries",UNREAD_MESSAGES_COUNT_API_URL:"http://unread-messages-count-api/url",LOGIN_BASE_URL:"http://login-base/url",LOGIN_REDIRECT_URL:"http://login-redirect/url",CLIENT_ID:"client-id",PORSCHE_COM_URL:["http://porsche-com/url"],DEALER_API_URL:"https://configurator-dev.porsche.com/api/dealer-search/dealers"},local:{CONTENT_URL:"https://preview-nav.porsche.com/content",ASSETS_URL:".",FOOTER_ASSETS_URL:"https://footer.pchomenav.aws.porsche.cloud/assets",COUNTRY_SELECTOR_URL:"https://preview.ppn.porsche.com/countries",PROFILE_API_URL:"https://api.porsche-preview.com/profiles/mydata",UNREAD_MESSAGES_COUNT_API_URL:"https://api.porsche-preview.com/inbox/pp/rest/messages/unreadCount",LOGIN_BASE_URL:"https://preview-login.porsche.com",LOGIN_REDIRECT_URL:"https://preview-nav.porsche.com/authIframe.html",CLIENT_ID:"V5yfGusXVALiypCMRFBfM4IAHaZ0IA4A",PORSCHE_COM_URL:["http://localhost:3333","http://localhost:3334","http://localhost:3335"],DEALER_API_URL:"https://configurator-dev.porsche.com/api/dealer-search/dealers"},preview:{CONTENT_URL:"https://preview-nav.porsche.com/content",ASSETS_URL:"https://preview-nav.porsche.com",FOOTER_ASSETS_URL:"https://footer.pchomenav.aws.porsche.cloud/assets",COUNTRY_SELECTOR_URL:"https://preview.ppn.porsche.com/countries",PROFILE_API_URL:"https://api.porsche-preview.com/profiles/mydata",UNREAD_MESSAGES_COUNT_API_URL:"https://api.porsche-preview.com/inbox/pp/rest/messages/unreadCount",LOGIN_BASE_URL:"https://preview-login.porsche.com",LOGIN_REDIRECT_URL:"https://preview-nav.porsche.com/authIframe.html",CLIENT_ID:"V5yfGusXVALiypCMRFBfM4IAHaZ0IA4A",PORSCHE_COM_URL:["https://vanillajs.preview-nav.porsche.com","https://angular.preview-nav.porsche.com","https://react.preview-nav.porsche.com","https://vanillajs.pchomenav.aws.porsche.cloud","https://react.pchomenav.aws.porsche.cloud","https://angular.pchomenav.aws.porsche.cloud","https://preview.ppn.porsche.com"],DEALER_API_URL:""},production:{CONTENT_URL:"https://nav.porsche.com/00BC524/content",ASSETS_URL:"https://nav.porsche.com/00BC524",FOOTER_ASSETS_URL:"https://nav.porsche.com/00BC524/footer/assets",PROFILE_API_URL:"https://api.porsche.com/profiles/mydata",COUNTRY_SELECTOR_URL:"https://porsche.com/countries",UNREAD_MESSAGES_COUNT_API_URL:"https://api.porsche.com/inbox/p/rest/messages/unreadCount",LOGIN_BASE_URL:"https://login.porsche.com",LOGIN_REDIRECT_URL:"https://nav.porsche.com/00BC524/auth/authIframe.html",CLIENT_ID:"QPw3VOLAMfI7r0nmRY8ELq4RzZpZeXEE",PORSCHE_COM_URL:["https://www.porsche.com"],DEALER_API_URL:""}},w=function(e,t){return m(void 0,void 0,void 0,(function(){var n,r;return y(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,fetch(e+"/"+t.toString()+".json",{headers:{"Cache-Control":"no-cache","Content-Type":"application/json"}})];case 1:return n=o.sent(),[3,3];case 2:return r=o.sent(),(0,c.e)("content","Failed to fetch content with error: "+r),[2,a.D];case 3:if(404===n.status)throw new Error("No content for locale "+t+" found");return n.ok?[2,n.json()]:[2,a.D]}}))}))},R=function(e){function t(t){var n=e.call(this,t)||this;return n.context.eventAction="PAGHomeNav_General_Load",n}return g(t,e),t.prototype.event=function(){return e.prototype.event.call(this)},t}(u.L),b=new Uint8Array(16);function S(){if(!r&&!(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(b)}var E=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function k(e){return"string"===typeof e&&E.test(e)}for(var T=[],C=0;C<256;++C)T.push((C+256).toString(16).substr(1));function A(e,t,n){var r=(e=e||{}).random||(e.rng||S)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(T[e[t+0]]+T[e[t+1]]+T[e[t+2]]+T[e[t+3]]+"-"+T[e[t+4]]+T[e[t+5]]+"-"+T[e[t+6]]+T[e[t+7]]+"-"+T[e[t+8]]+T[e[t+9]]+"-"+T[e[t+10]]+T[e[t+11]]+T[e[t+12]]+T[e[t+13]]+T[e[t+14]]+T[e[t+15]]).toLowerCase();if(!k(n))throw TypeError("Stringified UUID is invalid");return n}(r)}for(var L=(0,d.c)((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AppAuthError=void 0;var n=function(e,t){this.message=e,this.extras=t};t.AppAuthError=n})),I=(0,d.c)((function(e,t){var n=d.a&&d.a.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.TestRequestor=t.FetchRequestor=t.JQueryRequestor=t.Requestor=void 0;var r=function(){};t.Requestor=r;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.xhr=function(e){var t=$.ajax(e);return new Promise((function(e,n){t.then((function(t,n,r){e(t)}),(function(e,t,r){n(new L.AppAuthError(r))}))}))},t}(r);t.JQueryRequestor=o;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.xhr=function(e){if(!e.url)return Promise.reject(new L.AppAuthError("A URL must be provided."));var t=new URL(e.url),n={};(n.method=e.method,n.mode="cors",e.data)&&(e.method&&"POST"===e.method.toUpperCase()?n.body=e.data:new URLSearchParams(e.data).forEach((function(e,n){t.searchParams.append(n,e)})));if(n.headers={},e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n.headers[r]=e.headers[r]);var o=e.dataType&&"json"===e.dataType.toLowerCase();return o&&(n.headers.Accept="application/json, text/javascript, */*; q=0.01"),fetch(t.toString(),n).then((function(e){if(e.status>=200&&e.status<300){var t=e.headers.get("content-type");return o||t&&-1!==t.indexOf("application/json")?e.json():e.text()}return Promise.reject(new L.AppAuthError(e.status.toString(),e.statusText))}))},t}(r);t.FetchRequestor=i;var s=function(e){function t(t){var n=e.call(this)||this;return n.promise=t,n}return n(t,e),t.prototype.xhr=function(e){return this.promise},t}(r);t.TestRequestor=s})),O=(0,d.c)((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationServiceConfiguration=void 0;var n=function(){function e(e){this.authorizationEndpoint=e.authorization_endpoint,this.tokenEndpoint=e.token_endpoint,this.revocationEndpoint=e.revocation_endpoint,this.userInfoEndpoint=e.userinfo_endpoint,this.endSessionEndpoint=e.end_session_endpoint}return e.prototype.toJson=function(){return{authorization_endpoint:this.authorizationEndpoint,token_endpoint:this.tokenEndpoint,revocation_endpoint:this.revocationEndpoint,end_session_endpoint:this.endSessionEndpoint,userinfo_endpoint:this.userInfoEndpoint}},e.fetchFromIssuer=function(t,n){var r=t+"/.well-known/openid-configuration";return(n||new I.JQueryRequestor).xhr({url:r,dataType:"json",method:"GET"}).then((function(t){return new e(t)}))},e}();t.AuthorizationServiceConfiguration=n})),x=function(e){var t=M(e),n=t[0],r=t[1];return 3*(n+r)/4-r},U=function(e){var t,n,r=M(e),o=r[0],i=r[1],s=new B(function(e,t,n){return 3*(t+n)/4-n}(0,o,i)),a=0,c=i>0?o-4:o;for(n=0;n<c;n+=4)t=D[e.charCodeAt(n)]<<18|D[e.charCodeAt(n+1)]<<12|D[e.charCodeAt(n+2)]<<6|D[e.charCodeAt(n+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;2===i&&(t=D[e.charCodeAt(n)]<<2|D[e.charCodeAt(n+1)]>>4,s[a++]=255&t);1===i&&(t=D[e.charCodeAt(n)]<<10|D[e.charCodeAt(n+1)]<<4|D[e.charCodeAt(n+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t);return s},P=function(e){for(var t,n=e.length,r=n%3,o=[],i=16383,s=0,a=n-r;s<a;s+=i)o.push(F(e,s,s+i>a?a:s+i));1===r?(t=e[n-1],o.push(N[t>>2]+N[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],o.push(N[t>>10]+N[t>>4&63]+N[t<<2&63]+"="));return o.join("")},N=[],D=[],B="undefined"!==typeof Uint8Array?Uint8Array:Array,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",q=0,z=j.length;q<z;++q)N[q]=j[q],D[j.charCodeAt(q)]=q;function M(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function H(e){return N[e>>18&63]+N[e>>12&63]+N[e>>6&63]+N[63&e]}function F(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(H(r));return o.join("")}D["-".charCodeAt(0)]=62,D["_".charCodeAt(0)]=63;var G={byteLength:x,toByteArray:U,fromByteArray:P},V=(0,d.c)((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultCrypto=t.textEncodeLite=t.urlSafe=t.bufferToString=void 0;var n="undefined"!==typeof window&&!!window.crypto,r=n&&!!window.crypto.subtle,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function i(e){for(var t=[],n=0;n<e.byteLength;n+=1){var r=e[n]%o.length;t.push(o[r])}return t.join("")}function s(e){return G.fromByteArray(new Uint8Array(e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function a(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}t.bufferToString=i,t.urlSafe=s,t.textEncodeLite=a;var c=function(){function e(){}return e.prototype.generateRandom=function(e){var t=new Uint8Array(e);if(n)window.crypto.getRandomValues(t);else for(var r=0;r<e;r+=1)t[r]=Math.random()*o.length|0;return i(t)},e.prototype.deriveChallenge=function(e){return e.length<43||e.length>128?Promise.reject(new L.AppAuthError("Invalid code length.")):r?new Promise((function(t,n){crypto.subtle.digest("SHA-256",a(e)).then((function(e){return t(s(new Uint8Array(e)))}),(function(e){return n(e)}))})):Promise.reject(new L.AppAuthError("window.crypto.subtle is unavailable."))},e}();t.DefaultCrypto=c})),J=(0,d.c)((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.IS_PROFILE=t.IS_LOG=void 0,t.IS_LOG=!0,t.IS_PROFILE=!1})),Y=(0,d.c)((function(e,t){var n=d.a&&d.a.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};function r(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(J.IS_LOG){var o=t?t.length:0;o>0?console.log.apply(console,n([e],t)):console.log(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.profile=t.log=void 0,t.log=r;var o="undefined"!==typeof window&&!!window.performance&&!!console.profile;function i(e,t,i){var s=i.value,a=s.name;return a||(a="anonymous function"),i.value=o?function(e){console.profile(a);var t=window.performance.now(),r=s.call.apply(s,n([this||window],e)),o=window.performance.now()-t;return console.log(a+" took "+o+" ms"),console.profileEnd(),r}:function(e){r("Profile start "+a);var t=Date.now(),o=s.call.apply(s,n([this||window],e)),i=Date.now()-t;return r("Profile end "+a+" took "+i+" ms."),o},i}t.profile=function(e,t,n){return J.IS_PROFILE?i(e,t,n):n}})),W=(0,d.c)((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationRequest=void 0;var n=function(e){return e.generateRandom(10)},r=function(){function e(t,r,o){void 0===r&&(r=new V.DefaultCrypto),void 0===o&&(o=!0),this.crypto=r,this.usePkce=o,this.clientId=t.client_id,this.redirectUri=t.redirect_uri,this.scope=t.scope,this.responseType=t.response_type||e.RESPONSE_TYPE_CODE,this.state=t.state||n(r),this.extras=t.extras,this.internal=t.internal}return e.prototype.setupCodeVerifier=function(){var e=this;if(this.usePkce){var t=this.crypto.generateRandom(128),n=this.crypto.deriveChallenge(t).catch((function(e){Y.log("Unable to generate PKCE challenge. Not using PKCE",e)}));return n.then((function(n){n&&(e.internal=e.internal||{},e.internal.code_verifier=t,e.extras=e.extras||{},e.extras.code_challenge=n,e.extras.code_challenge_method="S256")}))}return Promise.resolve()},e.prototype.toJson=function(){var e=this;return this.setupCodeVerifier().then((function(){return{response_type:e.responseType,client_id:e.clientId,redirect_uri:e.redirectUri,scope:e.scope,state:e.state,extras:e.extras,internal:e.internal}}))},e.RESPONSE_TYPE_TOKEN="token",e.RESPONSE_TYPE_CODE="code",e}();t.AuthorizationRequest=r})),Q=(0,d.c)((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationRequestHandler=t.BUILT_IN_PARAMETERS=t.AuthorizationNotifier=void 0;var n=function(){function e(){this.listener=null}return e.prototype.setAuthorizationListener=function(e){this.listener=e},e.prototype.onAuthorizationComplete=function(e,t,n){this.listener&&this.listener(e,t,n)},e}();t.AuthorizationNotifier=n,t.BUILT_IN_PARAMETERS=["redirect_uri","client_id","response_type","state","scope"];var r=function(){function e(e,t){this.utils=e,this.crypto=t,this.notifier=null}return e.prototype.buildRequestUrl=function(e,n){var r={redirect_uri:n.redirectUri,client_id:n.clientId,response_type:n.responseType,state:n.state,scope:n.scope};if(n.extras)for(var o in n.extras)n.extras.hasOwnProperty(o)&&t.BUILT_IN_PARAMETERS.indexOf(o)<0&&(r[o]=n.extras[o]);var i=this.utils.stringify(r);return e.authorizationEndpoint+"?"+i},e.prototype.completeAuthorizationRequestIfPossible=function(){var e=this;return Y.log("Checking to see if there is an authorization response to be delivered."),this.notifier||Y.log("Notifier is not present on AuthorizationRequest handler.\n          No delivery of result will be possible"),this.completeAuthorizationRequest().then((function(t){t||Y.log("No result is available yet."),t&&e.notifier&&e.notifier.onAuthorizationComplete(t.request,t.response,t.error)}))},e.prototype.setAuthorizationNotifier=function(e){return this.notifier=e,this},e}();t.AuthorizationRequestHandler=r})),K=(0,d.c)((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationError=t.AuthorizationResponse=void 0;var n=function(){function e(e){this.code=e.code,this.state=e.state}return e.prototype.toJson=function(){return{code:this.code,state:this.state}},e}();t.AuthorizationResponse=n;var r=function(){function e(e){this.error=e.error,this.errorDescription=e.error_description,this.errorUri=e.error_uri,this.state=e.state}return e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri,state:this.state}},e}();t.AuthorizationError=r})),Z=(0,d.c)((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BasicQueryStringUtils=void 0;var n=function(){function e(){}return e.prototype.parse=function(e,t){return t?this.parseQueryString(e.hash):this.parseQueryString(e.search)},e.prototype.parseQueryString=function(e){for(var t={},n=(e=e.trim().replace(/^(\?|#|&)/,"")).split("&"),r=0;r<n.length;r+=1){var o=n[r].split("=");if(o.length>=2){var i=decodeURIComponent(o.shift()),s=o.length>0?o.join("="):null;s&&(t[i]=decodeURIComponent(s))}}return t},e.prototype.stringify=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&e[n]&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},e}();t.BasicQueryStringUtils=n})),X=(0,d.c)((function(e,t){var n=d.a&&d.a.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageBackend=t.StorageBackend=void 0;var r=function(){};t.StorageBackend=r;var o=function(e){function t(t){var n=e.call(this)||this;return n.storage=t||window.localStorage,n}return n(t,e),t.prototype.getItem=function(e){var t=this;return new Promise((function(n,r){var o=t.storage.getItem(e);n(o||null)}))},t.prototype.removeItem=function(e){var t=this;return new Promise((function(n,r){t.storage.removeItem(e),n()}))},t.prototype.clear=function(){var e=this;return new Promise((function(t,n){e.storage.clear(),t()}))},t.prototype.setItem=function(e,t){var n=this;return new Promise((function(r,o){n.storage.setItem(e,t),r()}))},t}(r);t.LocalStorageBackend=o})),ee=(0,d.c)((function(e,t){var n=d.a&&d.a.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.RedirectRequestHandler=void 0;var r=function(e){return e+"_appauth_authorization_request"},o=function(e){return e+"_appauth_authorization_service_configuration"},i="appauth_current_authorization_request",s=function(e){function t(t,n,r,o){void 0===t&&(t=new X.LocalStorageBackend),void 0===n&&(n=new Z.BasicQueryStringUtils),void 0===r&&(r=window.location),void 0===o&&(o=new V.DefaultCrypto);var i=e.call(this,n,o)||this;return i.storageBackend=t,i.locationLike=r,i}return n(t,e),t.prototype.performAuthorizationRequest=function(e,t){var n=this,s=this.crypto.generateRandom(10);Promise.all([this.storageBackend.setItem(i,s),t.toJson().then((function(e){return n.storageBackend.setItem(r(s),JSON.stringify(e))})),this.storageBackend.setItem(o(s),JSON.stringify(e.toJson()))]).then((function(){var r=n.buildRequestUrl(e,t);Y.log("Making a request to ",t,r),n.locationLike.assign(r)}))},t.prototype.completeAuthorizationRequest=function(){var e=this;return this.storageBackend.getItem(i).then((function(t){return t?e.storageBackend.getItem(r(t)).then((function(e){return JSON.parse(e)})).then((function(e){return new W.AuthorizationRequest(e)})).then((function(n){var s=""+e.locationLike.origin+e.locationLike.pathname,a=e.utils.parse(e.locationLike,!0),c=a.state,u=a.code,h=a.error;Y.log("Potential authorization request ",s,a,c,u,h);var l=c===n.state,p=null,d=null;if(l){if(h){var f=a.error_uri,v=a.error_description;d=new K.AuthorizationError({error:h,error_description:v,error_uri:f,state:c})}else p=new K.AuthorizationResponse({code:u,state:c});return Promise.all([e.storageBackend.removeItem(i),e.storageBackend.removeItem(r(t)),e.storageBackend.removeItem(o(t))]).then((function(){return Y.log("Delivering authorization response"),{request:n,response:p,error:d}}))}return Y.log("Mismatched request (state and request_uri) dont match."),Promise.resolve(null)})):null}))},t}(Q.AuthorizationRequestHandler);t.RedirectRequestHandler=s})),te=(0,d.c)((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TokenError=t.TokenResponse=t.nowInSeconds=void 0;t.nowInSeconds=function(){return Math.round((new Date).getTime()/1e3)};var n=function(){function e(e){this.accessToken=e.access_token,this.tokenType=e.token_type||"bearer",e.expires_in&&(this.expiresIn=parseInt(e.expires_in,10)),this.refreshToken=e.refresh_token,this.scope=e.scope,this.idToken=e.id_token,this.issuedAt=e.issued_at||t.nowInSeconds()}return e.prototype.toJson=function(){var e;return{access_token:this.accessToken,id_token:this.idToken,refresh_token:this.refreshToken,scope:this.scope,token_type:this.tokenType,issued_at:this.issuedAt,expires_in:null===(e=this.expiresIn)||void 0===e?void 0:e.toString()}},e.prototype.isValid=function(e){return void 0===e&&(e=-600),!this.expiresIn||t.nowInSeconds()<this.issuedAt+this.expiresIn+e},e}();t.TokenResponse=n;var r=function(){function e(e){this.error=e.error,this.errorDescription=e.error_description,this.errorUri=e.error_uri}return e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri}},e}();t.TokenError=r})),ne=(0,d.c)((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTokenRequestHandler=void 0;var n=function(){function e(e,t){void 0===e&&(e=new I.JQueryRequestor),void 0===t&&(t=new Z.BasicQueryStringUtils),this.requestor=e,this.utils=t}return e.prototype.isTokenResponse=function(e){return void 0===e.error},e.prototype.performRevokeTokenRequest=function(e,t){return this.requestor.xhr({url:e.revocationEndpoint,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(t.toStringMap())}).then((function(e){return!0}))},e.prototype.performTokenRequest=function(e,t){var n=this;return this.requestor.xhr({url:e.tokenEndpoint,method:"POST",dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(t.toStringMap())}).then((function(e){return n.isTokenResponse(e)?new te.TokenResponse(e):Promise.reject(new L.AppAuthError(e.error,new te.TokenError(e)))}))},e}();t.BaseTokenRequestHandler=n})),re=(0,d.c)((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TokenRequest=t.GRANT_TYPE_REFRESH_TOKEN=t.GRANT_TYPE_AUTHORIZATION_CODE=void 0,t.GRANT_TYPE_AUTHORIZATION_CODE="authorization_code",t.GRANT_TYPE_REFRESH_TOKEN="refresh_token";var n=function(){function e(e){this.clientId=e.client_id,this.redirectUri=e.redirect_uri,this.grantType=e.grant_type,this.code=e.code,this.refreshToken=e.refresh_token,this.extras=e.extras}return e.prototype.toJson=function(){return{grant_type:this.grantType,code:this.code,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,client_id:this.clientId,extras:this.extras}},e.prototype.toStringMap=function(){var e={grant_type:this.grantType,client_id:this.clientId,redirect_uri:this.redirectUri};if(this.code&&(e.code=this.code),this.refreshToken&&(e.refresh_token=this.refreshToken),this.extras)for(var t in this.extras)this.extras.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=this.extras[t]);return e},e}();t.TokenRequest=n})),oe=function(e){function t(t,n,r){var o=e.call(this)||this;return o.code=t,o.state=n,o.error=r,o}return g(t,e),t.prototype.parse=function(e,t){return{code:this.code,state:this.state,error:this.error}},t}(Z.BasicQueryStringUtils),ie=function(){function e(){this.config=null,this.fetchRequestor=new I.FetchRequestor,this.tokenHandler=new ne.BaseTokenRequestHandler(this.fetchRequestor)}return e.prototype.recieveMessage=function(e){var t=e.data,n=t.state,r=t.error,o=t.code;return m(this,void 0,void 0,(function(){var e,t,i,s,u,h,l,p,d;return y(this,(function(v){switch(v.label){case 0:if((0,c.d)("silent_auth","Received message event"),void 0==this.authorizationHandler)return(0,c.d)("silent_auth","Received message event but authorizationHandler not initialised"),[2,void 0];if(!(0,a.i)(o)||!(0,a.i)(n))return[3,9];if(e=this.config||{},t=e.LOGIN_REDIRECT_URL,i=e.CLIENT_ID,!(0,a.i)(i))throw new Error("config was not set on silent auth service");this.authorizationHandler.locationLike=f.w.location,this.authorizationHandler.utils=new oe(o,n,null),s=void 0,v.label=1;case 1:return v.trys.push([1,3,,4]),[4,this.authorizationHandler.completeAuthorizationRequest()];case 2:return s=v.sent(),[3,4];case 3:throw u=v.sent(),(0,c.e)("silent_auth","Complete authorization request failed: "+JSON.stringify(u.message)),u;case 4:(0,c.d)("silent_auth","Authorization Request Response received. Trying to get token..."),h=void 0,v.label=5;case 5:return v.trys.push([5,7,,8]),l=new re.TokenRequest({client_id:i,redirect_uri:t,grant_type:re.GRANT_TYPE_AUTHORIZATION_CODE,code:s.response.code,refresh_token:void 0,extras:{prompt:"none",code_verifier:s.request.internal.code_verifier}}),[4,this.tokenHandler.performTokenRequest(this.authorizationServiceConfiguration,l)];case 6:return h=v.sent(),[3,8];case 7:throw p=v.sent(),(0,c.e)("silent_auth","Token request failed: "+JSON.stringify(p.message)),p;case 8:if((0,c.d)("silent_auth","Token request completed successfully"),(0,a.i)(h.accessToken))return[2,h.accessToken];throw d="Token request failed: access token not present in response",(0,c.e)("silent_auth",d),new Error(d);case 9:if((0,a.i)(r))throw d="Received error from message, "+r,(0,c.e)("silent_auth",d),new Error(d);return[2,void 0]}}))}))},e.prototype.setConfig=function(e){return m(this,void 0,void 0,(function(){var t,n;return y(this,(function(r){switch(r.label){case 0:return this.config=e,t=(this.config||{}).LOGIN_BASE_URL,(0,a.i)(t)?(n=this,[4,O.AuthorizationServiceConfiguration.fetchFromIssuer(t,this.fetchRequestor)]):[3,2];case 1:n.authorizationServiceConfiguration=r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.fetchAccessToken=function(){var e=this.config||{},t=e.CLIENT_ID,n=e.LOGIN_REDIRECT_URL;if(!(0,a.i)(t)||!(0,a.i)(n))throw new Error("Config has not been set.");if(void 0===this.authorizationServiceConfiguration)throw new Error("oauth config has not been fetched.");if(void 0===this.locationLike&&(this.locationLike=f.w.getIframeLocationLike("auth-iframe-navigation-header")),"function"!==typeof this.locationLike.assign)throw new Error("unable to perform authorization request due to incompatible locationLike");var r=new X.LocalStorageBackend(f.w.sessionStorage);if("function"!==typeof r.setItem)throw new Error("invalid storage backend provided");this.authorizationHandler=new ee.RedirectRequestHandler(r,new oe(null,null,null),this.locationLike,{generateRandom:f.w.generateRandom,deriveChallenge:f.w.deriveChallenge});var o=new W.AuthorizationRequest({client_id:t,redirect_uri:n,scope:"openid",response_type:W.AuthorizationRequest.RESPONSE_TYPE_CODE,state:void 0,extras:{prompt:"none"}},{generateRandom:f.w.generateRandom,deriveChallenge:f.w.deriveChallenge});this.authorizationHandler.performAuthorizationRequest(this.authorizationServiceConfiguration,o)},e}(),se=function(){function e(e){this.config=null,this.isPorscheCom=!1,this.silentAuthService=null,this.initialisingSilentAuthService=!1,this.locale=e}return e.getUserNameFromUserData=function(e){void 0===e&&(e={});var t="";return(0,a.i)(e.firstName)?(t=e.firstName,(0,a.i)(e.middleName)?(t+=" "+e.middleName,(0,a.i)(e.lastName)&&(t+=" "+e.lastName)):(0,a.i)(e.lastName)&&(t+=" "+e.lastName)):(0,a.i)(e.middleName)?(t=e.middleName,(0,a.i)(e.lastName)&&(t+=" "+e.lastName)):(0,a.i)(e.lastName)&&(t=e.lastName),t},e.getUserIdFromUserData=function(e){return void 0===e&&(e={}),m(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,f.w.hashString(e.porscheId)];case 1:return[2,t.sent()]}}))}))},e.prototype.setConfig=function(e){return m(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:if("object"!==typeof e||null===e)return[3,6];if(this.config=e,this.isPorscheCom=this.config.PORSCHE_COM_URL.some((function(e){return e.includes(f.w.location.origin)})),null===this.silentAuthService)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,5]),[4,this.silentAuthService.setConfig(this.config)];case 2:return n.sent(),[3,5];case 3:return t=n.sent(),(0,c.e)("user_service_set_config","Could not set silent auth config: "+t),[4,this.silentAuthService.setConfig(null)];case 4:return n.sent(),[3,5];case 5:return[3,7];case 6:this.config=null,this.isPorscheCom=!1,n.label=7;case 7:return[2]}}))}))},e.prototype.getUserData=function(e){return m(this,void 0,void 0,(function(){var t,n,r,o,i;return y(this,(function(s){switch(s.label){case 0:n={method:"GET",headers:{"Accept-Language":""+this.locale.toHeaderString(),"x-trace-id":A(),apikey:this.config.CLIENT_ID,Authorization:"Bearer "+e,Accept:"application/json"}},r=void 0===this.locale.country?"":"?country="+this.locale.country,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,fetch(""+this.config.PROFILE_API_URL+r,n)];case 2:return t=s.sent(),[3,4];case 3:throw o=s.sent(),i="Exception occurred while fetching user info: "+JSON.stringify(o.message),(0,c.e)("user_profile",i),new Error(i);case 4:if(200!==t.status)throw i="Error occurred: "+t.status+" "+t.statusText,(0,c.e)("user_profile",i),new Error(i);return[2,t.json()]}}))}))},e.prototype.getUnreadMessagesCount=function(e){return m(this,void 0,void 0,(function(){var t,n,r,o,i,s;return y(this,(function(a){switch(a.label){case 0:n={method:"GET",headers:{"x-trace-id":A(),apikey:this.config.CLIENT_ID,Authorization:"Bearer "+e,Accept:"application/json"}},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,fetch(this.config.UNREAD_MESSAGES_COUNT_API_URL,n)];case 2:return r=a.sent(),[3,4];case 3:return o=a.sent(),i="Exception occurred while fetching unread message count: "+JSON.stringify(o.message),(0,c.e)("unread_messages_count",i),[3,4];case 4:return 200!==r.status?[3,6]:[4,r.json()];case 5:return s=a.sent(),"number"===typeof(null===(t=null===s||void 0===s?void 0:s.data)||void 0===t?void 0:t.unreadCount)?[2,s.data.unreadCount]:[3,7];case 6:(0,c.e)("unread_messages_count","Error occurred: "+r.status+" "+r.statusText),a.label=7;case 7:return[2,0]}}))}))},e.prototype.newMessageEventReceived=function(e,t){return m(this,void 0,void 0,(function(){var n;return y(this,(function(r){switch(r.label){case 0:if(null===this.silentAuthService)return(0,c.i)("user_service","auth message received but silent auth service not initialised - venting"),[2,t];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.silentAuthService.recieveMessage(e)];case 2:return n=r.sent(),[3,4];case 3:return r.sent(),p.n.state.loggedInState=a.L,[2,void 0];case 4:return(0,a.i)(n)?[2,this.accessTokenUpdated(n,t,!0)]:[2,t]}}))}))},e.prototype.accessTokenUpdated=function(t,n,r){return m(this,void 0,void 0,(function(){var o,i,s,u,h,d;return y(this,(function(f){switch(f.label){case 0:if(t===a.R)return[2,n];if(null===this.config)return[2,t];if(p.n.state.loggedInState=a.a,o=0,i=a.L,(0,a.i)(t))return[3,6];if(!this.isPorscheCom||!r)return p.n.state.unreadMessagesCount=o,p.n.state.loggedInState=i,[2,void 0];if(this.initialisingSilentAuthService)return[2,void 0];f.label=1;case 1:return f.trys.push([1,4,,5]),null!==this.silentAuthService?[3,3]:(this.initialisingSilentAuthService=!0,this.silentAuthService=new ie,[4,this.silentAuthService.setConfig(this.config)]);case 2:f.sent(),this.initialisingSilentAuthService=!1,f.label=3;case 3:return this.silentAuthService.fetchAccessToken(),[3,5];case 4:return s=f.sent(),(0,c.e)("user_service","could not init silent auth service: "+s),p.n.state.unreadMessagesCount=o,p.n.state.loggedInState=i,[3,5];case 5:return[2,void 0];case 6:return f.trys.push([6,9,,10]),[4,this.getUserData(t)];case 7:return h=f.sent(),i=e.getUserNameFromUserData(h)||a.b,[4,e.getUserIdFromUserData(h)];case 8:return u=f.sent(),[3,10];case 9:throw d=f.sent(),p.n.state.unreadMessagesCount=o,p.n.state.loggedInState=i,d;case 10:return f.trys.push([10,12,,13]),[4,this.getUnreadMessagesCount(t)];case 11:return o=f.sent(),[3,13];case 12:return f.sent(),[3,13];case 13:return p.n.state.unreadMessagesCount=o,p.n.state.loggedInState=i,l.a.state.userId=u,[2,t]}}))}))},e.prototype.revokeAccessToken=function(e){return m(this,void 0,void 0,(function(){var t,n,r,o,i,s;return y(this,(function(u){switch(u.label){case 0:if(null===this.config||!(0,a.i)(e))return[2];t=this.config,n=t.LOGIN_BASE_URL,r=t.CLIENT_ID,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,fetch(n+"/as/revoke_token.oauth2",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"token="+encodeURIComponent(e)+"&client_id="+encodeURIComponent(r)})];case 2:return o=u.sent(),[3,4];case 3:throw i=u.sent(),s="Exception occurred while revoking access token: "+JSON.stringify(i.message),(0,c.e)("revoke_access_token",s),i;case 4:if(!o.ok)throw 401===o.status?(0,c.e)("revoke_access_token","Unauthorized revocation attempt"):(0,c.e)("revoke_access_token","Error when revoking acccess token"),new Error("Revoke access token failed");return[2]}}))}))},e}(),ae=function(){function e(e){(0,o.r)(this,e),this.accessTokenExpired=(0,o.c)(this,"accessTokenExpired",7),this.navigationDidLoad=(0,o.c)(this,"navigationDidLoad",7),this.phnLogout=(0,o.c)(this,"phnLogout",6),this.config=null,this.accessibilityStatement=a.c,this.countryRecommenderContent=a.d,this.scrolledPastHeader=!1,this.breakpoint=f.w.getBreakpoint(),this.showCountryRecommender=f.w.redirected,this.countryRecommenderClosed=!1,this.menuDrawerClosed=!0,this.localeObject=new s.L,this.userService=new se(this.localeObject)}return e.prototype.localeWatchHandler=function(){return m(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.localeObject.setLocale(this.locale),l.a.state.locale.setLocale(this.locale),[4,this.initNavContentStore()];case 1:return e.sent(),[2]}}))}))},e.prototype.newAccessTokenReceived=function(){return m(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.accessToken===a.R?[2]:this.accessToken===this.accessTokenState?[3,2]:[4,this.accessTokenStateUpdated(this.accessToken)];case 1:e.sent(),e.label=2;case 2:return this.accessToken=a.R,[2]}}))}))},e.prototype.newEnvReceived=function(){return m(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.initEnvironment()];case 1:return e.sent(),[4,this.initNavContentStore()];case 2:return e.sent(),[4,this.accessTokenStateUpdated(this.accessTokenState)];case 3:return e.sent(),[2]}}))}))},e.prototype.scrollHandler=function(){this.scrolledPastHeader=this.el.getBoundingClientRect().bottom<=0},e.prototype.newAuthMessageReceived=function(e){return m(this,void 0,void 0,(function(){var t,n;return y(this,(function(r){switch(r.label){case 0:return t=(this.config||{}).LOGIN_REDIRECT_URL,(0,a.i)(t)&&t.startsWith(e.origin)?(n=this,[4,this.userService.newMessageEventReceived(e,this.accessTokenState)]):[3,2];case 1:n.accessTokenState=r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.handleLogout=function(e){return m(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.userService.revokeAccessToken(this.accessTokenState)];case 1:return t.sent(),[3,3];case 2:return t.sent(),[2];case 3:return this.phnLogout.emit(),f.w.location=e.detail,[2]}}))}))},e.prototype.resizeHandler=function(){this.breakpoint=f.w.getBreakpoint()},e.prototype.accessTokenStateUpdated=function(e){return m(this,void 0,void 0,(function(){var t,n;return y(this,(function(r){switch(r.label){case 0:t=v.n.state.metafunctionalities.length>1,r.label=1;case 1:return r.trys.push([1,3,,4]),n=this,[4,this.userService.accessTokenUpdated(e,this.accessTokenState,t)];case 2:return n.accessTokenState=r.sent(),[3,4];case 3:return r.sent(),this.accessTokenExpired.emit(),this.accessTokenState=void 0,[3,4];case 4:return[2]}}))}))},e.prototype.initEnvironment=function(){return m(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=Object.keys(_),(0,a.i)(this.env)&&e.includes(this.env)?(this.config=_[this.env],h.f.setFeatures(this.env),[4,this.userService.setConfig(this.config)]):(this.env=a.e,[2]);case 1:return t.sent(),l.a.set("environment",this.env),[2]}}))}))},e.prototype.initNavContentStore=function(){return m(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:if(""===this.localeObject.toString()||null===this.config)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,w(this.config.CONTENT_URL,this.localeObject)];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),this.locale=this.localeObject.setLocale().toString(),[2];case 4:return Object.keys(e).forEach((function(t){v.n.set(t,e[t])})),h.f.isFeatureEnabled(a.F,f.w.location.search)&&v.n.set("dealer",h.m),this.accessibilityStatement=v.n.state.accessibilityStatement,this.countryRecommenderContent=v.n.state.countryRecommender,(0,a.i)(this.clientId)&&(p.n.state.applicationClientId=this.clientId),[2]}}))}))},e.prototype.componentWillLoad=function(){return m(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.el.style.setProperty("--scrollbar-width",f.w.getScrollbarWidth()),(0,a.i)(this.locale)&&(this.localeObject.setLocale(this.locale),l.a.state.locale.setLocale(this.locale)),[4,this.initEnvironment()];case 1:return e.sent(),[4,this.initNavContentStore()];case 2:return e.sent(),(0,a.i)(this.accessToken)&&this.accessToken!==a.R&&(this.accessTokenState=this.accessToken,this.accessToken=a.R),[2]}}))}))},e.prototype.componentDidLoad=function(){return m(this,void 0,void 0,(function(){var e,t=this;return y(this,(function(n){switch(n.label){case 0:return e=new R(l.a.state),(l.a.state.w.pagData=l.a.state.w.pagData||[]).push(e.event()),p.n.state.navigationLoaded?(f.w.navigationLoaded=!0,this.navigationDidLoad.emit()):p.n.onChange("navigationLoaded",(function(){f.w.navigationLoaded=!0,t.navigationDidLoad.emit()})),f.w.version=a.V,[4,this.accessTokenStateUpdated(this.accessTokenState)];case 1:return n.sent(),[2]}}))}))},e.prototype.skipToMainContent=function(e){e.stopPropagation();var t=this.el.shadowRoot.querySelector("#main");t.tabIndex=0,t.focus()},e.prototype.mainContentTab=function(){this.el.shadowRoot.querySelector("#main").tabIndex=-1},e.prototype.addFocus=function(){var e=this.el.shadowRoot.querySelector("phn-p-button.skip-content");e.classList.add("focused");var t=this.el.shadowRoot.querySelector("phn-crest phn-p-marque");e.style.left=t.getBoundingClientRect().left+"px"},e.prototype.removeFocus=function(){var e=this.el.shadowRoot.querySelector("phn-p-button.skip-content");e.classList.remove("focused"),e.style.left=""},e.prototype.render=function(){var e=this,t=this.config||{},n=t.ASSETS_URL,r=void 0===n?"":n,s=t.COUNTRY_SELECTOR_URL,c=void 0===s?"":s,u=t.FOOTER_ASSETS_URL,h=void 0===u?"":u,d=t.LOGIN_BASE_URL,f=void 0===d?"":d,v=t.DEALER_API_URL,g=void 0===v?"":v;return(0,a.i)(p.n.state.loggedInState)&&(l.a.state.loginStatus=(0,a.g)(p.n.state.loggedInState)),(0,o.h)(o.H,null,this.showCountryRecommender&&null!==this.countryRecommenderContent&&!this.countryRecommenderClosed?(0,o.h)("phn-country-recommender",{locale:this.localeObject,content:this.countryRecommenderContent,assetsURL:h,countrySelectorURL:c,env:this.env,role:"region","aria-label":"Change recommended Region or Language",onBannerClosed:function(){e.countryRecommenderClosed=!0}}):null,"en-US"===this.locale&&null!==this.accessibilityStatement?(0,o.h)("a",{class:"sr-only",href:this.accessibilityStatement.Link},this.accessibilityStatement.Text):null,(0,o.h)("phn-p-button",{variant:"primary",class:"skip-content",onFocus:function(){return e.addFocus()},onClick:function(t){return e.skipToMainContent(t)},onBlur:function(){return e.removeFocus()}},"Skip to main content"),(0,o.h)("header",null,(0,o.h)("phn-p-flex",{class:"header-content","justify-content":"space-between"},(0,o.h)("phn-crest",{breakpoint:this.breakpoint}),this.breakpoint<i.b.l?(0,o.h)("phn-burger-button",{onClick:function(t){e.usingKeyboard=(0,a.f)(t),e.menuDrawerClosed=!e.menuDrawerClosed}}):(0,o.h)("phn-menu-desktop-level-1",{assetsURL:r,loginURL:f,breakpoint:this.breakpoint})),this.breakpoint<i.b.l&&!this.menuDrawerClosed?(0,o.h)("phn-menu-drawer",{assetsURL:r,loginURL:f,breakpoint:this.breakpoint,initialUsingKeyboard:this.usingKeyboard,dealerApiUrl:g,onDrawerClosed:function(t){var n,r=t.detail.usingKeyboard;e.menuDrawerClosed=!0,e.usingKeyboard=r,r&&(null===(n=(0,a.h)(e.el.shadowRoot.querySelector("phn-burger-button phn-p-button-pure")))||void 0===n||n.focus())}}):null),(0,o.h)("div",{class:"header-border"}),"preview"===this.env?(0,o.h)("phn-preview-badge",{versionString:"Header "+a.V+" - PP content"}):null,(0,o.h)("div",{id:"main",tabindex:"-1",class:"main-content",onBlur:function(){return e.mainContentTab()}}))},Object.defineProperty(e,"assetsDirs",{get:function(){return["auth"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"el",{get:function(){return(0,o.g)(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"watchers",{get:function(){return{locale:["localeWatchHandler"],accessToken:["newAccessTokenReceived"],env:["newEnvReceived"]}},enumerable:!1,configurable:!0}),e}();ae.style='@-webkit-keyframes slideDown{from{max-height:0}to{max-height:1000px}}@keyframes slideDown{from{max-height:0}to{max-height:1000px}}@-webkit-keyframes slideUp{from{max-height:1000px}to{max-height:0}}@keyframes slideUp{from{max-height:1000px}to{max-height:0}}@-webkit-keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@-webkit-keyframes slideRight{from{max-width:1000px}to{max-width:0}}@keyframes slideRight{from{max-width:1000px}to{max-width:0}}@-webkit-keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@-webkit-keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@-webkit-keyframes fadeIn{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}@keyframes fadeIn{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}:host{display:block;position:relative;background-color:#fff;visibility:visible;height:auto !important}:host header{font-family:"Porsche Next", "Arial Narrow", Arial, "Heiti SC", SimHei, sans-serif;font-weight:400;height:3.8125rem;color:#000;-webkit-box-sizing:content-box;box-sizing:content-box;margin:0 7vw}@media (min-width: 1000px){:host header{padding-left:var(--scrollbar-width)}}@media (min-width: 1760px){:host header{margin:0 10vw}}@media (min-width: 1920px){:host header{margin:0 auto;width:96rem}}@media (min-width: 760px){:host header{height:4.4375rem}}@media (min-width: 1300px){:host header{height:7.3125rem;-ms-flex-direction:row;flex-direction:row}}@media (min-width: 1760px){:host header{height:7.6875rem}}:host header .header-content{height:100%}:host header phn-crest{z-index:1;-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0)}@media (min-width: 1300px){:host header phn-crest{z-index:400}}:host header .burger-button:focus{outline-width:2px;outline-style:solid;outline-offset:1px;outline-color:currentColor}:host .header-border{height:1px;background-color:#e3e4e5}:host phn-p-button.skip-content{display:none}@media (min-width: 1000px){:host phn-p-button.skip-content{display:-ms-inline-flexbox;display:inline-flex;left:-999px;position:absolute;width:auto;height:auto;overflow:hidden;z-index:-999}}:host phn-p-button.skip-content.focused{outline-width:2px;outline-style:solid;outline-offset:1px;outline-color:currentColor;overflow:visible;z-index:999}:host .main-content{width:20px}:host .main-content:focus{outline-style:none}:host .sr-only{position:absolute;width:1px;height:1px;white-space:nowrap;overflow:hidden;clip:rect(1px, 1px, 1px, 1px);-webkit-clip-path:inset(50%);clip-path:inset(50%)}'}}]);